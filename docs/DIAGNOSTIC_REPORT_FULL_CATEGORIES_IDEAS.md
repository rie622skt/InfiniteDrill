# 診断レポートを全カテゴリ対応にする案（可読性維持）

## 制約
- レーダー軸が12本になるとラベルが重なり可読性が著しく低下する。
- 診断は全12カテゴリで実施されているため、レポート上でも12カテゴリ分の結果を見られるようにしたい。

---

## 案1: 表示グループをタブで切り替え（レーダーは1つ・4軸のまま）

**概要**: レーダーに表示する「4カテゴリ」をグループで切り替える。

- **タブ**: 「梁」「断面・座屈・応力度」「トラス・ラーメン」の3タブ。
- 各タブでレーダーに表示するカテゴリ:
  - **梁**: 単純×集中/分布、片持ち×集中/分布（現状どおり4軸）
  - **断面・座屈・応力度**: 断面の性質、曲げ応力度、座屈（3軸のみ・正三角形レーダー）
  - **トラス・ラーメン**: トラスゼロ、トラス軸力、静定ラーメン（3軸）
- **メリット**: レーダーは常に3〜4軸で可読性を維持。全カテゴリをグループごとに確認可能。
- **デメリット**: 全12種を一度に「形」では見られない。

---

## 案2: レーダーは「表示する4カテゴリ」をユーザーが選択**

**概要**: 12カテゴリから4つをピッカー（ドロップダウン等）で選び、その4つでレーダーを描画。

- **メリット**: 自分が気になる4つだけレーダーで比較できる。
- **デメリット**: 操作が1手増える。未選択の8カテゴリは別途リストで見る必要がある。

---

## 案3: グループ別ミニレーダーを3つ並べる**

**概要**: 画面上に小さなレーダーを3つ並べる（梁用・断面・座屈・応力度用・トラス・ラーメン用）。

- **メリット**: 全グループを一度に「形」で把握できる。
- **デメリット**: 画面が縦に長くなる。モバイルでは特にスペースを取る。

---

## 案4: レーダーをやめ、全12カテゴリを横棒グラフで一覧**

**概要**: レーダーを廃止し、12行の横棒（正答率）で一覧表示。

- **メリット**: 可読性が高く、全カテゴリを漏れなく数値で比較できる。
- **デメリット**: レーダーならではの「形でざっくり傾向」がなくなる。

---

## 案5（推奨）: グループタブ + レーダー + 全カテゴリの正答率リスト**

**概要**: 案1のタブでレーダーを切り替えつつ、その**下**に「全12カテゴリの正答率」をコンパクトなリストで常時表示する。

- **構成**:
  1. **グループタブ**: 「梁」「断面・座屈・応力度」「トラス・ラーメン」→ 選択中のグループだけレーダー表示（3〜4軸）。
  2. **見出し「全カテゴリの正答率」**: その下に 12 行を「カテゴリ名: ○○% (正答/総数)」で表示。必要なら短いラベル（CATEGORY_LABELS の短縮版）を使う。
- **メリット**:
  - レーダーは3〜4軸のまま可読性を維持。
  - 全カテゴリの数値はリストで常に確認可能。
  - 弱点カテゴリと全カテゴリの対応が一目で分かる。
- **デメリット**: レポート領域がやや長くなる（リスト分）。

---

## 推奨実装方針（案5）

1. **DiagnosticRadarChart**  
   - `categories: readonly ProblemCategory[]` を props で受け取る（長さ 3 または 4 を想定）。  
   - ラベルは `CATEGORY_LABELS` を useBeamProblem から import して表示（短い別名があればそれを使う）。

2. **HomeScreen（診断結果ブロック）**  
   - グループ定義: 梁4 / 断面・応力度・座屈3 / トラス・ラーメン3。  
   - グループ用タブを追加し、`selectedChartGroup` で「梁」「断面・座屈・応力度」「トラス・ラーメン」を切り替え。  
   - レーダーには `chartGroupCategories[selectedChartGroup]` を渡す。  
   - レーダー下に「全カテゴリの正答率」セクションを追加し、`ALL_CATEGORIES` を map して「CATEGORY_LABELS[cat]: accuracy% (correct/total)」を表示。

3. **既存の「弱点カテゴリ」「コメント」**  
   - そのまま維持（リストの直下またはその上で問題なし）。

この方針で実装すれば、可読性を維持しつつ診断レポートを全カテゴリ対応にできます。
